/*! 
 Build based on gin-vue-admin 
 Time : 1646814142000 */
var e=(e,a,t)=>new Promise(((i,n)=>{var l=e=>{try{s(t.next(e))}catch(a){n(a)}},o=e=>{try{s(t.throw(e))}catch(a){n(a)}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(l,o);s((t=t.apply(e,a)).next())}));import{e as a,f as t,r as i}from"./gin-vue-admin-autoCode.1646814142000.js";import{u as n,r as l,i as o,o as s,j as u,q as d,k as r,t as c,A as p,C as m,x as f,H as g,e as v,d as h}from"./gin-vue-admin-vendor.1646814142000.js";import{f as y}from"./gin-vue-admin-format.1646814142000.js";import{_ as b}from"../gva/gin-vue-admin-index.1646814142000.js";import"./gin-vue-admin-date.1646814142000.js";import"./gin-vue-admin-dictionary.1646814142000.js";import"./gin-vue-admin-sysDictionary.1646814142000.js";const w={class:"gva-table-box"},C={class:"gva-btn-list"},x=p("新增"),z=p(" 已回滚 "),_=p(" 未回滚 "),k=p("回滚"),j=p("复用"),N=p("删除"),D={class:"gva-pagination"},I={name:"AutoCodeAdmin"};var A=b(Object.assign(I,{setup(b){const I=n(),A=l(1),B=l(0),T=l(10),S=l([]),P=e=>{T.value=e,E()},q=e=>{A.value=e,E()},E=()=>e(this,null,(function*(){const e=yield a({page:A.value,pageSize:T.value});0===e.code&&(S.value=e.data.list,B.value=e.data.total,A.value=e.data.page,T.value=e.data.pageSize)}));E();const H=a=>e(this,null,(function*(){v.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield t({id:Number(a.ID)})).code&&(h.success("删除成功"),E())}))))})),O=a=>e(this,null,(function*(){v.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield i({id:Number(a.ID)})).code&&(h.success("回滚成功"),E())}))))})),F=e=>{e?I.push({name:"autoCodeEdit",params:{id:e.ID}}):I.push({name:"autoCode"})};return(e,a)=>{const t=o("el-button"),i=o("el-table-column"),n=o("el-tag"),l=o("el-table"),v=o("el-pagination");return s(),u("div",null,[d("div",w,[d("div",C,[r(t,{size:"mini",type:"primary",icon:"plus",onClick:a[0]||(a[0]=e=>F(null))},{default:c((()=>[x])),_:1})]),r(l,{data:S.value},{default:c((()=>[r(i,{type:"selection",width:"55"}),r(i,{align:"left",label:"id",width:"60",prop:"ID"}),r(i,{align:"left",label:"日期",width:"180"},{default:c((e=>[p(m(f(y)(e.row.CreatedAt)),1)])),_:1}),r(i,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),r(i,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),r(i,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),r(i,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:c((e=>[e.row.flag?(s(),g(n,{key:0,type:"danger",size:"mini",effect:"dark"},{default:c((()=>[z])),_:1})):(s(),g(n,{key:1,size:"mini",type:"success",effect:"dark"},{default:c((()=>[_])),_:1}))])),_:1}),r(i,{align:"left",label:"操作","min-width":"180"},{default:c((e=>[d("div",null,[r(t,{size:"mini",type:"text",disabled:1===e.row.flag,onClick:a=>O(e.row)},{default:c((()=>[k])),_:2},1032,["disabled","onClick"]),r(t,{size:"mini",type:"text",onClick:a=>F(e.row)},{default:c((()=>[j])),_:2},1032,["onClick"]),r(t,{size:"mini",type:"text",onClick:a=>H(e.row)},{default:c((()=>[N])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),d("div",D,[r(v,{"current-page":A.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:q,onSizeChange:P},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-d6464e9e"]]);export{A as default};

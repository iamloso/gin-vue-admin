/*! 
 Build based on gin-vue-admin 
 Time : 1646814142000 */
import{s as a}from"./gin-vue-admin-authority.16468141420002.js";import{w as e}from"./gin-vue-admin-warningBar.1646814142000.js";import{r as t,i as r,o as l,j as i,q as u,k as o,t as n,J as s,K as d,H as h,A as c,C as y,d as m}from"./gin-vue-admin-vendor.1646814142000.js";import"../gva/gin-vue-admin-index.1646814142000.js";const v={class:"clearflex",style:{margin:"18px"}},f=c("确 定"),p=c("全选"),g=c("本角色"),I=c("本角色及子角色"),w={name:"Datas"},x=Object.assign(w,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(w,{expose:x,emit:A}){const k=w,b=t([]),j=t(!1),C=a=>{a&&a.forEach((a=>{const e={};e.authorityId=a.authorityId,e.authorityName=a.authorityName,b.value.push(e),a.children&&a.children.length&&C(a.children)}))},_=t([]);C(k.authority),k.row.dataAuthorityId&&k.row.dataAuthorityId.forEach((a=>{const e=b.value&&b.value.filter((e=>e.authorityId===a.authorityId))&&b.value.filter((e=>e.authorityId===a.authorityId))[0];_.value.push(e)}));const R=()=>{_.value=[...b.value],A("changeRow","dataAuthorityId",_.value),j.value=!0},z=()=>{_.value=b.value.filter((a=>a.authorityId===k.row.authorityId)),A("changeRow","dataAuthorityId",_.value),j.value=!0},N=()=>{const a=[];E(k.row,a),_.value=b.value.filter((e=>a.indexOf(e.authorityId)>-1)),A("changeRow","dataAuthorityId",_.value),j.value=!0},E=(a,e)=>{e.push(a.authorityId),a.children&&a.children.forEach((a=>{E(a,e)}))},O=()=>{return e=this,t=null,r=function*(){0===(yield a(k.row)).code&&m({type:"success",message:"资源设置成功"})},new Promise(((a,l)=>{var i=a=>{try{o(r.next(a))}catch(e){l(e)}},u=a=>{try{o(r.throw(a))}catch(e){l(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,u);o((r=r.apply(e,t)).next())}));var e,t,r},V=()=>{A("changeRow","dataAuthorityId",_.value),j.value=!0};return x({enterAndNext:()=>{O()},needConfirm:j}),(a,t)=>{const m=r("el-button"),w=r("el-checkbox"),x=r("el-checkbox-group");return l(),i("div",null,[u("div",v,[o(m,{class:"fl-right",size:"mini",type:"primary",onClick:O},{default:n((()=>[f])),_:1}),o(m,{class:"fl-left",size:"mini",type:"primary",onClick:R},{default:n((()=>[p])),_:1}),o(m,{class:"fl-left",size:"mini",type:"primary",onClick:z},{default:n((()=>[g])),_:1}),o(m,{class:"fl-left",size:"mini",type:"primary",onClick:N},{default:n((()=>[I])),_:1})]),o(x,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a),onChange:V},{default:n((()=>[(l(!0),i(s,null,d(b.value,((a,e)=>(l(),h(w,{key:e,label:a},{default:n((()=>[c(y(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),o(e,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）"})])}}});export{x as default};

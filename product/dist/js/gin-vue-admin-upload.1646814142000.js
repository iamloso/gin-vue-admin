/*! 
 Build based on gin-vue-admin 
 Time : 1646814142000 */
var e=(e,a,l)=>new Promise(((t,n)=>{var i=e=>{try{o(l.next(e))}catch(a){n(a)}},s=e=>{try{o(l.throw(e))}catch(a){n(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);o((l=l.apply(e,a)).next())}));import{_ as a}from"./gin-vue-admin-logo.1646814142000.js";import{g as l,d as t}from"./gin-vue-admin-fileUploadAndDownload.1646814142000.js";import{U as n,d as i}from"./gin-vue-admin-image.1646814142000.js";import{_ as s,u as o}from"../gva/gin-vue-admin-index.1646814142000.js";import{C as r}from"./gin-vue-admin-index.16468141420008.js";import{f as u}from"./gin-vue-admin-format.1646814142000.js";import{r as d,i as p,R as g,S as c,o as m,j as v,k as f,t as h,q as y,x as w,C as _,A as b,F as x,G as j,e as z,d as C}from"./gin-vue-admin-vendor.1646814142000.js";import"./gin-vue-admin-date.1646814142000.js";import"./gin-vue-admin-dictionary.1646814142000.js";import"./gin-vue-admin-sysDictionary.1646814142000.js";const U=e=>(x("data-v-052e9e4b"),e=e(),j(),e),k={class:"common-layout"},A=U((()=>y("img",{style:{float:"left"},src:a},null,-1))),S=U((()=>y("span",{style:{float:"left","font-size":"25px"}},"师范教育系在线报名",-1))),O={class:"gva-btn-list"},B=b("头像上传"),D=b("下载"),P=b("删除"),T={class:"gva-pagination"},$=b("版权所有© Copyright 2022-2025 北京诗码作集科技有线公司技术支持(电话：18513172626)"),q={name:"Upload",created(){console.log(this.$route.params.name)}};var F=s(Object.assign(q,{setup(a){const s=d("/api"),x=o(),j=d(""),U=d(1),q=d(0),F=d(10),G=d([]),I=e=>{F.value=e,R()},K=e=>{U.value=e,R()},R=()=>e(this,null,(function*(){const e=yield l({page:U.value,pageSize:F.value});0===e.code&&(G.value=e.data.list,q.value=e.data.total,U.value=e.data.page,F.value=e.data.pageSize)}));R();const E=a=>e(this,null,(function*(){z.confirm("此操作将永久文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield t(a)).code&&(C({type:"success",message:"删除成功!"}),1===G.value.length&&U.value>1&&U.value--,R())})))).catch((()=>{C({type:"info",message:"已取消删除"})}))})),H=d(!1),J=e=>{H.value=!0;const a="image/jpeg"===e.type,l="image/png"===e.type,t=e.size/1024/1024<.5;return a||l||(C.error("上传图片只能是 jpg或png 格式!"),H.value=!1),t||(C.error("未压缩未见上传图片大小不能超过 500KB，请使用压缩上传"),H.value=!1),(l||a)&&t},L=e=>{H.value=!1,0===e.code?(C({type:"success",message:"上传成功"}),0===e.code&&R()):C({type:"warning",message:e.msg})},M=()=>{C({type:"error",message:"上传失败"}),H.value=!1};return(e,a)=>{const l=p("el-header"),t=p("el-button"),o=p("el-upload"),d=p("el-table-column"),z=p("el-tag"),C=p("el-table"),N=p("el-pagination"),Q=p("el-scrollbar"),V=p("el-main"),W=p("el-footer"),X=p("el-container"),Y=g("loading");return c((m(),v("div",k,[f(X,null,{default:h((()=>[f(l,null,{default:h((()=>[A,S])),_:1}),y("div",null,[f(V,null,{default:h((()=>[f(Q,{height:"600px"},{default:h((()=>[y("div",O,[f(o,{action:`${s.value}/fileUploadAndDownload/upload`,"before-upload":J,headers:{"x-token":w(x).token},"on-error":M,"on-success":L,"show-file-list":!1,class:"upload-btn"},{default:h((()=>[f(t,{size:"mini",type:"primary"},{default:h((()=>[B])),_:1})])),_:1},8,["action","headers"]),f(n,{imageUrl:j.value,"onUpdate:imageUrl":a[0]||(a[0]=e=>j.value=e),"file-size":512,"max-w-h":1080,class:"upload-btn",onOnSuccess:R},null,8,["imageUrl"])]),f(C,{data:G.value},{default:h((()=>[f(d,{align:"left",label:"预览",width:"100"},{default:h((e=>[f(r,{"pic-type":"file","pic-src":e.row.url},null,8,["pic-src"])])),_:1}),f(d,{align:"left",label:"日期",prop:"UpdatedAt",width:"180"},{default:h((e=>[y("div",null,_(w(u)(e.row.UpdatedAt)),1)])),_:1}),f(d,{align:"left",label:"文件名",prop:"name",width:"180"}),f(d,{align:"left",label:"链接",prop:"url","min-width":"300"}),f(d,{align:"left",label:"标签",prop:"tag",width:"100"},{default:h((e=>[f(z,{type:"jpg"===e.row.tag?"primary":"success","disable-transitions":""},{default:h((()=>[b(_(e.row.tag),1)])),_:2},1032,["type"])])),_:1}),f(d,{align:"left",label:"操作",width:"160"},{default:h((e=>[f(t,{size:"small",icon:"download",type:"text",onClick:a=>{var l;(l=e.row).url.indexOf("http://")>-1||l.url.indexOf("https://")>-1?i(l.url,l.name):i(s.value+l.url,l.name)}},{default:h((()=>[D])),_:2},1032,["onClick"]),f(t,{size:"small",icon:"delete",type:"text",onClick:a=>E(e.row)},{default:h((()=>[P])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),y("div",T,[f(N,{"current-page":U.value,"page-size":F.value,"page-sizes":[10,30,50,100],style:{float:"right",padding:"20px"},total:q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:K,onSizeChange:I},null,8,["current-page","page-size","total"])])])),_:1})])),_:1})]),f(W,null,{default:h((()=>[$])),_:1})])),_:1})])),[[Y,H.value,void 0,{fullscreen:!0,lock:!0}]])}}}),[["__scopeId","data-v-052e9e4b"]]);export{F as default};
